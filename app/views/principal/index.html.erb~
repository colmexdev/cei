<%= render 'principal/header' %>

		<div class="row">

			<div class="col-md-12" id="div_slider" style="background-color:#CCCCCC;"> <!-- Columnas para slider -->
				<div id="myCarousel" class="carousel slide" data-ride="carousel">

					<div class="carousel-inner" role="listbox">
			   		<div class="item active"><img class="imagen_slider_fondo" src="https://www.colmex.mx/assets/slider/slide-18-programas-academicos_original_11.jpg?1506339134" alt="Slide 18 programas academicos original 11"><div class="ghost-slider" style="height: 808.775px;"><a class="liga_img" target="" href="https://www.colmex.mx/es/programas"><img class="imagen_slider_sobre ii" id="badge-7" src="https://www.colmex.mx/assets/slider/badge-18-programas_original_11.png?1506353558" alt="Badge 18 programas original 11" style="width: 411.536px; max-width: 290px;"></a></div></div>
					</div>
					<!-- Left and right controls -->
					<a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
						<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
						<span class="sr-only">Anterior</span>
					</a>
					<a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
						<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
						<span class="sr-only">Siguiente</span>
					</a>
				</div> <!-- Cierre de slider -->
			</div> <!--Cierre de columnas slider -->
		</div> <!-- Cierre de row de slider -->

	<div class="row"> <!-- Fila para eventos -->
		<div class="col-md-12" id="div_eventos"> <!-- Columnas para eventos -->
			<div id="carouselEventos" class="carousel slide" data-ride="carousel" data-interval="false">

				<!-- Wrapper for slides -->
		    <div class="carousel-inner" id="render_eventos" role="listbox" >

		    </div>

				<!-- Left and right controls -->
				<a class="left carousel-control" href="#carouselEventos" role="button" data-slide="prev">
					<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
					<span class="sr-only">Anterior</span>
				</a>
				<a class="right carousel-control" href="#carouselEventos" role="button" data-slide="next">
					<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
					<span class="sr-only">Siguiente</span>
				</a>
			</div> <!-- Cierre de slider -->
		</div> <!-- Cierre de columnas para eventos -->
	</div> <!-- Cierre de fila para eventos -->

	<div class="row"> <!-- Fila para botón de actividades -->
		<div class="col-md-12" id="div_actividades"> <!--Columnas para eventos -->
			<div id="boton_actividades">
				<a href="http://agenda.colmex.mx/Calendario" target="_blank" id="liga_actividades"><span><%= t('.actividades').upcase %></span></a>
			</div>
		</div> <!-- Cierre de columnas para botón de actividades -->
	</div> <!-- Cierre de fila para boton actividades -->

	<div class="row"> <!-- Fila para formulario de suscripción -->
		<div class="col-md-12" id="div_suscripcion"> <!-- Columnas para formulario de suscripción -->
			<div id="boton_susc">
				<a href="http://listas.colmex.mx/?p=subscribe" target="_blank" id="liga_susc"><span><%= t('.suscripcion') %></span></a>
			</div>
		</div> <!-- Cierre de columnas para formulario de suscripción -->
	</div> <!-- Cierre de fila para formulario de suscripción -->

	<div class="row" id="fila_media"> <!-- Fila de publicaciones, videos y revistas -->
		<div class="col-md-9" id="col-borde"> <!-- Fila de publicaciones y videos -->

			<div class="container-fluid">	<!-- Fila de publicaciones -->
				<div class="col-xs-12">
					<div class="titulo-fila">
						<span class="rosa-bold"><%= t('.pubs_t').upcase %></span>
					</div>
					<div id="pubs-slick" class="carrusel-slick">
						<div><h3>1</h3></div>
						<div><h3>2</h3></div>
						<div><h3>3</h3></div>
						<div><h3>4</h3></div>
					</div>
					<div class="boton-sec">
						<span><%= t('.pubs_b').upcase %></span>
					</div>
				</div>
			</div><!-- Cierre de fila de publicaciones -->
			<div class="container-fluid">	<!-- Fila de videos -->
				<div class="col-xs-12">
					<div class="titulo-fila">
						<span class="rosa-bold"><%= t('.vids_t').upcase %></span>
					</div>
					<div id="vids-slick" class="carrusel-slick">
					</div>
					<div class="boton-sec">
						<span><%= t('.vids_b').upcase %></span>
					</div>
				</div>
			</div> <!-- Cierre de fila de videos -->
		</div> <!-- Cierre de fila de publicaciones y videos -->

		<div class="col-md-3" id="col-revs"> <!-- Fila de revistas -->
			<div class="titulo-fila">
				<span class="rosa-bold"><%= t('.revs_t').upcase %></span>
			</div>
			<div class="uk-grid uk-grid-small">
				<div class="uk-width-small-1-2 uk-width-large-1-1" style="text-align:center">
					<%= image_tag @img_foro, class: "img-revista" %>
					<div class="boton-info">
						<a href="https://forointernacional.colmex.mx/index.php/fi" class="link-div"><%= t('.info') %></a>
					</div>
				</div>
				<div class="uk-width-small-1-2 uk-width-large-1-1" style="text-align:center">
					<%= image_tag @img_agora, class: "img-revista" %>
					<div class="boton-info">
						<a href="https://agora.colmex.mx/" class="link-div"><%= t('.info') %></a>
					</div>
				</div>
			</div>
		</div> <!-- Cierre de fila de revistas -->
	</div> <!-- Cierre de fila de publicaciones, videos y revistas -->

	<div class="row" id="fila_sitios"> <!-- Fila de otros sitios -->
		<div class="sitios-cont">
			<div class="sitios-img">
				<a href="https://publicaciones.colmex.mx" target="_blank"><img src="/img/publicaciones.png"></a>
			</div>
			<div class="sitios-img">
				<a href="http://revistas.colmex.mx/index.php" target="_blank"><img src="/img/revistas.png"></a>
			</div>
			<div class="sitios-img">
				<a href="https://pred.colmex.mx/" target="_blank"><img src="/img/coed.png"></a>
			</div>
			<div class="sitios-img">
				<a href="https://oia.colmex.mx/" target="_blank"><img src="/img/oia.png"></a>
			</div>
		</div>
	</div>

<script>
Array.prototype.each_slice = function (size, callback){
  for (var i = 0, l = this.length; i < l; i += size){
    callback.call(this, this.slice(i, i + size));
  }
};

$(document).ready(function(){
	$.ajax({
		url: "https://www.colmex.mx/catalogo_eventos?centro=cei&crono=true&ordercrono=asc",
		success: function(result){
			if(result["videos"].length == 0){
				$("#div_eventos").remove();
				return false;
			}
			var ancho = Math.max(document.documentElement.clientWidth, window.innerWidth || document.body.ClientWidth || 0);
			var evento, f_i, div_event, eventos = [], dias = ["Domingo", "Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado"], meses = ["enero", "febrero", "marzo", "abril", "mayo", "junio", "julio", "agosto", "septiembre", "octubre", "noviembre", "diciembre"];
			for(var i = 0; i < result["videos"].length; i++){
				f_i = new Date(result["videos"][i]["fechaInicio"].substring(3,5) + "/" + result["videos"][i]["fechaInicio"].substring(0,2) + "/" + result["videos"][i]["fechaInicio"].substring(6) + " " + result["videos"][i]["horaInicio"].substring(0,5));
				evento = '<div class="img_evento"><img class="img_sede" src="/img/cei.png" alt="CEI"></div>' +
				'<div class="desc_evento">' +
					'<div class="tipo_evento"><p>' + result["videos"][i]["tipoActividad"] + "</p></div>" +
					'<div class="titulo_evento"><p>' + result["videos"][i]["tituloActividad"] + (result["videos"][i]["subtituloActividad"] != "" ? (": " + result["videos"][i]["subtituloActividad"]) : "") + "</p></div>" +
					'<div class="lugar_fecha_evento">' +
						'<div class="cal"><img class="img_cal" src="/img/calendario.png" alt="Calendario"></div>' +
						'<div class="datos_evento"><p>' +
							dias[f_i.getDay()] + " " + f_i.getDate() + " de " + meses[f_i.getMonth()] + "<br>" +
							result["videos"][i]["horaInicio"].substring(0,5) + " | " + result["videos"][i]["horaFin"].substring(0,5) + "<br>" +
							result["videos"][i]["sede"] + ',<br><span>' + result["videos"][i]["institucionSede"] + "</span></p></div></div>" +
							'<div class="liga_evento"><a href="' + result["videos"][i]["liga"] + '"class="liga_evento" target="_blank">' + "<%= t('.mas_info') %>" + ' +' + '</a></div>' +
							"</div>";
				eventos.push(evento);
			}
			var j = 0;
			eventos.each_slice((ancho < 785 ? 1 : (ancho < 1150 ? 2 : 4)), function(arr){
				div_event = '<div class="item' + (j == 0 ? " active" : "") + '">';
				for(var i = 0; i < arr.length; i++){
					div_event = div_event + '<div class="evento">' + arr[i] + '</div>';
				}
				div_event = div_event + "</div>";
				$("#render_eventos").html($("#render_eventos").html() + div_event);
			});
		}
	});

	$.ajax({
		url: 'https://coed.colmex.mx/catalogo_videos?tags=cei&crono=desc&vpp=3',
		success: function(result){
			var vid_html = "";
			for(var i = 0; i < result["vids"].length; i++){
				vid_html = vid_html + '<div class="vid-cont-slick">' +
					'<iframe class="iframe-slick" src="https://www.youtube.com/embed/' + result["vids"][i]["v_id"] + '"></iframe>' +
					'</div>';
			}
			$("#vids-slick").html(vid_html);
			setTimeout(function(){
				$("#vids-slick").slick({'slidesToShow': 3, 'slidesToScroll': 1, 'infinite': false, 'swipe': false, 'touchMove': false, 'responsive': [{breakpoint: 800, settings: {'slidesToShow': 1, 'swipe': false, 'touchMove': false, 'draggable': false}}, {breakpoint: 1550, settings: {'slidesToShow': 2, 'swipe': false, 'touchMove': false, 'draggable': 'false'}}]
				});
				$(".iframe-slick").height($(".iframe-slick").width() * 9/16);
				$(window).resize(function(){
					setTimeout(function(){
						$(".iframe-slick").height($(".iframe-slick").width() * 9/16);
					}, 100);
				});

			}, 100);
		}
	});

	$("#pubs-slick").slick({'slidesToShow': 3, 'slidesToScroll': 1, 'dots': true, 'dotsClass': 'puntos-carrusel'});

	$(window).resize(function(){
		$(".img-revista").height($(".img-revista").width()*33/25);
	});

});
</script>

<%= render 'principal/footer' %>
