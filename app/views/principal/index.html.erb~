<%= render 'principal/header' %>

		<div class="row">

			<div class="col-md-12" id="div_slider" style="background-color:#CCCCCC;"> <!-- Columnas para slider -->
				<div id="myCarousel" class="carousel slide" data-ride="carousel">

					<div class="carousel-inner" role="listbox">
			   		<div class="item active"><img class="imagen_slider_fondo" src="https://www.colmex.mx/assets/slider/slide-18-programas-academicos_original_11.jpg?1506339134" alt="Slide 18 programas academicos original 11"><div class="ghost-slider" style="height: 808.775px;"><a class="liga_img" target="" href="https://www.colmex.mx/es/programas"><img class="imagen_slider_sobre ii" id="badge-7" src="https://www.colmex.mx/assets/slider/badge-18-programas_original_11.png?1506353558" alt="Badge 18 programas original 11" style="width: 411.536px; max-width: 290px;"></a></div></div>
					</div>
					<!-- Left and right controls -->
					<a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
						<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
						<span class="sr-only">Anterior</span>
					</a>
					<a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
						<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
						<span class="sr-only">Siguiente</span>
					</a>
				</div> <!-- Cierre de slider -->
			</div> <!--Cierre de columnas slider -->
		</div> <!-- Cierre de row de slider -->

	<div class="row"> <!-- Fila para eventos -->
		<div class="col-md-12" id="div_eventos"> <!-- Columnas para eventos -->
			<div id="carouselEventos" class="carousel slide" data-ride="carousel" data-interval="false">

				<!-- Wrapper for slides -->
		    <div class="carousel-inner" id="render_eventos" role="listbox" >

		    </div>

				<!-- Left and right controls -->
				<a class="left carousel-control" href="#carouselEventos" role="button" data-slide="prev">
					<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
					<span class="sr-only">Anterior</span>
				</a>
				<a class="right carousel-control" href="#carouselEventos" role="button" data-slide="next">
					<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
					<span class="sr-only">Siguiente</span>
				</a>
			</div> <!-- Cierre de slider -->


		</div> <!-- Cierre de columnas para eventos -->
	</div> <!-- Cierre de fila para eventos -->

<script>
Array.prototype.each_slice = function (size, callback){
  for (var i = 0, l = this.length; i < l; i += size){
    callback.call(this, this.slice(i, i + size));
  }
};

$(document).ready(function(){
	$.ajax({
		url: "https://www.colmex.mx/catalogo_eventos?centro=cei&crono=true&ordercrono=asc",
		success: function(result){
			var ancho = Math.max(document.documentElement.clientWidth, window.innerWidth || document.body.ClientWidth || 0);
			var evento, f_i, eventos = [], dias = ["Domingo", "Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado"], meses = ["enero", "febrero", "marzo", "abril", "mayo", "junio", "julio", "agosto", "septiembre", "octubre", "noviembre", "diciembre"];
			for(var i = 0; i < result["videos"].length; i++){
				f_i = new Date(result["videos"][i]["fechaInicio"].substring(3,5) + "/" + result["videos"][i]["fechaInicio"].substring(0,2) + "/" + result["videos"][i]["fechaInicio"].substring(6) + " " + result["videos"][i]["horaInicio"].substring(0,5));
				evento = '<div class="img_evento"><img class="img_sede" src="/cei.png" alt="CEI"></div>' +
				'<div class="desc_evento">' +
					'<div class="tipo_evento"><p>' + result["videos"][i]["tipoActividad"] + "</p></div>" +
					'<div class="titulo_evento"><p>' + result["videos"][i]["tituloActividad"] + (result["videos"][i]["subtituloActividad"] != "" ? (": " + result["videos"][i]["subtituloActividad"]) : "") + "</p></div>" +
					'<div class="lugar_fecha_evento">' +
						'<div class="cal"><img class="img_cal" src="/calendario.png" alt="Calendario"></div>' +
						'<div class="datos_evento"><p>' +
							dias[f_i.getDay()] + " " + f_i.getDate() + " de " + meses[f_i.getMonth()] + "<br>" +
							result["videos"][i]["horaInicio"].substring(0,5) + " | " + result["videos"][i]["horaFin"].substring(0,5) + "<br>" +
							result["videos"][i]["sede"] + ',<br><span>' + result["videos"][i]["institucionSede"] + "</span></p></div></div>" +
							'<div class="liga_evento"><a href="' + result["videos"][i]["liga"] + '"class="liga_evento" target="_blank">' + "<%= t('.mas_info') %>" + ' +' + '</a></div>' +
							"</div>";
				eventos.push(evento);
			}
			eventos.each_slice((ancho < 785 ? 1 : (ancho < 1150 ? 2 : 4)), function(arr){
				console.log(arr);
			});
		}
	});
});
</script>

<%= render 'principal/footer' %>
